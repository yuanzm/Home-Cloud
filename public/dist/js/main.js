!function a(b,c,d){function e(g,h){if(!c[g]){if(!b[g]){var i="function"==typeof require&&require;if(!h&&i)return i(g,!0);if(f)return f(g,!0);var j=new Error("Cannot find module '"+g+"'");throw j.code="MODULE_NOT_FOUND",j}var k=c[g]={exports:{}};b[g][0].call(k.exports,function(a){var c=b[g][1][a];return e(c?c:a)},k,k.exports,a,b,c,d)}return c[g].exports}for(var f="function"==typeof require&&require,g=0;g<d.length;g++)e(d[g]);return e}({1:[function(a,b){var c,d,e,f,g,h,i;f=$("#my-name"),d=$(".like-icon"),c=$(".like-button"),e=$("#likes"),h=function(a,b,c,d){var e,f;return f="/data/changelike",e={myName:a,dataId:b,dataType:c,likeChange:d},$.ajax({type:"POST",url:f,data:e,success:function(){}})},i=function(){return alert("请先登录")},g=function(){function a(a){this.page=a}return a.prototype.init=function(){return"data-list"===this.page?this.bindHandler():this.detailPageBind()},a.prototype.bindHandler=function(){return d.bind("click",function(){var a,b,c,d;return f.text()?(a=$(this).parent().parent().parent().siblings(".panel-heading").find(".data-likes"),b=a.text(),c=$(this).data("datatype"),d=$(this).data("id"),$(this).hasClass("liked")?($(this).removeClass("liked"),h(f.text(),d,c,-1),a.text(Number(b)-1)):($(this).addClass("liked"),h(f.text(),d,c,1),a.text(Number(b)+1))):i()})},a.prototype.detailPageBind=function(){return c.bind("click",function(){var a,b,c;return f.text()?(b=$(this).data("datatype"),c=$(this).data("id"),a=e.text(),$(this).hasClass("liked")?($(this).removeClass("liked").find("p").text("点赞 +1"),e.text("赞 "+(Number(a.slice(2,a.length))-1)),h(f.text(),c,b,-1)):($(this).addClass("liked").find("p").text("已点赞"),e.text("赞 "+(Number(a.slice(2,a.length))+1)),h(f.text(),c,b,1))):void 0})},a}(),b.exports=g},{}],2:[function(a,b){var c,d,e,f,g,h,i,j,k,l;d=$(".comment-button"),f=$("#my-name"),e=$("#comment-input"),g=$(window),c=$("#comments"),i=function(a,b,c,d,e){var f,g;return g="/data/addcomment",f={myName:a,dataId:b,dataType:c,commentText:d},$.ajax({type:"POST",url:g,data:f,success:function(){return e()}})},l=function(){return alert("请先登录")},k=function(){return c.find("li").length},j=function(a){var b,d;return d=k(),b="<li>",b+="<p>",b+="<span>#"+(d+1)+"楼 </span>",b+="<span>"+f.text()+"</span>",b+="</p>",b+="<p><span>"+a+"</span></p>",b+="</li>",c.append($(b))},h=function(){function a(){}return a.prototype.bindHandler=function(){var a;return a=this,d.bind("click",a.sendComment)},a.prototype.sendComment=function(){var a,b,c;return f.text()?(b=$(this).data("datatype"),c=$(this).data("id"),a=e.val(),""!==a?i(f.text(),c,b,a,function(){return e.val(" "),j(a)}):void 0):l()},a}(),b.exports=h},{}],3:[function(a){var b,c,d,e,f;c=a("./add-like.coffee"),b=a("./comment.coffee"),e=new c("data-list"),e.init(),f=new c("data-detail"),f.init(),d=new b,d.bindHandler()},{"./add-like.coffee":1,"./comment.coffee":2}]},{},[3]);